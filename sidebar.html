<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <link rel="stylesheet" href="https://ssl.gstatic.com/docs/script/css/add-ons1.css">
  <!-- Optionally import a modern sans-serif font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <?!= include('dark.css'); ?>
</head>
<body>
  <h3><b>Rubric Input</b></h3>
  <div class="block">
    <label for="rubric-text">Input a Rubric</label>
    <textarea id="rubric-text" placeholder="Enter your rubric here"></textarea>
  </div>
  <div class="block">
    <label for="rubric-name">Name for Rubric</label>
    <input type="text" id="rubric-name" placeholder="Enter rubric name">
  </div>
  <div class="block">
    <button class="button" id="save-rubric">Save Rubric</button>
  </div>
  
  <h3><b>Score and Feedback</b></h3>
  <div class="block">
    <select id="saved-rubric">
      <option>Select Saved Rubric</option>
      <option>Rubric 1</option>
      <option>Rubric 2</option>
    </select>
  </div>
  <div class="block">
    <button class="button" id="evaluate">Evaluate</button>
  </div>
  <div class="block">
    <div class="feedback-box" id="feedback">
      <p>No feedback yet.</p>
    </div>
  </div>
  <div class="block">
    <button class="button" id="import-feedback">Import Feedback to Doc</button>
  </div>
  
  <script>
    document.getElementById('save-rubric').addEventListener('click', function() {
      let rubricName = document.getElementById("rubric-name").value;
      console.log("Should save rubric:", rubricName);
      // google.script.run.saveRubric(rubricName, document.getElementById("rubric-text").value);
    });

    document.getElementById('evaluate').addEventListener('click', function() {
      console.log("Should evaluate text");
      document.getElementById('feedback').innerHTML = '<p>Evaluating...</p>';
      google.script.run.withSuccessHandler(function(feedback) {
        document.getElementById('feedback').innerHTML = feedback;
      }).evaluateDocument();
    });
    
    document.getElementById('import-feedback').addEventListener('click', function() {
      console.log("Should import feedback");
      google.script.run.importFeedbackToDoc(document.getElementById('feedback').innerText);
    });
  </script>
</body>
</html>
